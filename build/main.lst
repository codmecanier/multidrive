ARM GAS  /tmp/cczpJbAA.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"main.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.rodata.main.str1.4,"aMS",%progbits,1
  18              		.align	2
  19              	.LC0:
  20 0000 0D0AE682 		.ascii	"\015\012\346\202\250\345\217\221\351\200\201\347\232"
  20      A8E58F91 
  20      E98081E7 
  20      9A
  21 000d 84E6B688 		.ascii	"\204\346\266\210\346\201\257\344\270\272:\015\000"
  21      E681AFE4 
  21      B8BA3A0D 
  21      00
  22 001a 0000     		.align	2
  23              	.LC1:
  24 001c 0D0A0D00 		.ascii	"\015\012\015\000"
  25              		.align	2
  26              	.LC2:
  27 0020 0D0A414C 		.ascii	"\015\012ALIENTEK \346\216\242\347\264\242\350\200\205"
  27      49454E54 
  27      454B20E6 
  27      8EA2E7B4 
  27      A2E88085 
  28 0034 53544D33 		.ascii	"STM32F407\345\274\200\345\217\221\346\235\277 \344\270"
  28      32463430 
  28      37E5BC80 
  28      E58F91E6 
  28      9DBF20E4 
  29 0049 B2E58FA3 		.ascii	"\262\345\217\243\345\256\236\351\252\214\015\000"
  29      E5AE9EE9 
  29      AA8C0D00 
  30 0055 000000   		.align	2
  31              	.LC3:
  32 0058 E6ADA3E7 		.ascii	"\346\255\243\347\202\271\345\216\237\345\255\220@AL"
  32      82B9E58E 
  32      9FE5AD90 
  32      40414C
  33 0067 49454E54 		.ascii	"IENTEK\015\012\015\012\015\000"
  33      454B0D0A 
  33      0D0A0D00 
  34 0073 00       		.align	2
  35              	.LC4:
  36 0074 E8AFB7E8 		.ascii	"\350\257\267\350\276\223\345\205\245\346\225\260\346"
ARM GAS  /tmp/cczpJbAA.s 			page 2


  36      BE93E585 
  36      A5E695B0 
  36      E6
  37 0081 8DAE2CE4 		.ascii	"\215\256,\344\273\245\345\233\236\350\275\246\351\224"
  37      BBA5E59B 
  37      9EE8BDA6 
  37      E994
  38 008f AEE7BB93 		.ascii	"\256\347\273\223\346\235\237\015\000"
  38      E69D9F0D 
  38      00
  39              		.section	.text.main,"ax",%progbits
  40              		.align	1
  41              		.global	main
  42              		.arch armv7e-m
  43              		.syntax unified
  44              		.thumb
  45              		.thumb_func
  46              		.fpu fpv4-sp-d16
  48              	main:
  49              	.LFB135:
  50              		.file 1 "USER/main.c"
   1:USER/main.c   **** #include "sys.h"
   2:USER/main.c   **** #include "delay.h"
   3:USER/main.c   **** #include "usart.h"
   4:USER/main.c   **** #include "led.h"
   5:USER/main.c   **** #include "key.h"
   6:USER/main.c   **** /************************************************
   7:USER/main.c   ****  ALIENTEK 探索者STM32F407开发板 实验4
   8:USER/main.c   ****  串口实验-HAL库函数版
   9:USER/main.c   ****  技术支持：www.openedv.com
  10:USER/main.c   ****  淘宝店铺：http://eboard.taobao.com 
  11:USER/main.c   ****  关注微信公众平台微信号："正点原子"，免费获取STM32资料。
  12:USER/main.c   ****  广州市星翼电子科技有限公司  
  13:USER/main.c   ****  作者：正点原子 @ALIENTEK
  14:USER/main.c   **** ************************************************/
  15:USER/main.c   **** 
  16:USER/main.c   **** int main(void)
  17:USER/main.c   **** {
  51              		.loc 1 17 1 view -0
  52              		.cfi_startproc
  53              		@ args = 0, pretend = 0, frame = 0
  54              		@ frame_needed = 0, uses_anonymous_args = 0
  55 0000 38B5     		push	{r3, r4, r5, lr}
  56              	.LCFI0:
  57              		.cfi_def_cfa_offset 16
  58              		.cfi_offset 3, -16
  59              		.cfi_offset 4, -12
  60              		.cfi_offset 5, -8
  61              		.cfi_offset 14, -4
  18:USER/main.c   **** 	u8 len;	
  62              		.loc 1 18 2 view .LVU1
  19:USER/main.c   **** 	u16 times=0;
  63              		.loc 1 19 2 view .LVU2
  64              	.LVL0:
  20:USER/main.c   **** 	
  21:USER/main.c   ****     HAL_Init();                    	//初始化HAL库    
  65              		.loc 1 21 5 view .LVU3
ARM GAS  /tmp/cczpJbAA.s 			page 3


  66 0002 FFF7FEFF 		bl	HAL_Init
  67              	.LVL1:
  22:USER/main.c   ****     Stm32_Clock_Init(336,8,2,7);  	//设置时钟,168Mhz
  68              		.loc 1 22 5 view .LVU4
  69 0006 0723     		movs	r3, #7
  70 0008 0222     		movs	r2, #2
  71 000a 0821     		movs	r1, #8
  72 000c 4FF4A870 		mov	r0, #336
  73 0010 FFF7FEFF 		bl	Stm32_Clock_Init
  74              	.LVL2:
  23:USER/main.c   **** 	delay_init(168);               	//初始化延时函数
  75              		.loc 1 23 2 view .LVU5
  76 0014 A820     		movs	r0, #168
  77 0016 FFF7FEFF 		bl	delay_init
  78              	.LVL3:
  24:USER/main.c   **** 	uart_init(115200);              //初始化USART
  79              		.loc 1 24 2 view .LVU6
  80 001a 4FF4E130 		mov	r0, #115200
  81 001e FFF7FEFF 		bl	uart_init
  82              	.LVL4:
  25:USER/main.c   **** 	LED_Init();						//初始化LED	
  83              		.loc 1 25 2 view .LVU7
  84 0022 FFF7FEFF 		bl	LED_Init
  85              	.LVL5:
  26:USER/main.c   ****     KEY_Init();                     //初始化按键
  86              		.loc 1 26 5 view .LVU8
  87 0026 FFF7FEFF 		bl	KEY_Init
  88              	.LVL6:
  19:USER/main.c   **** 	
  89              		.loc 1 19 6 is_stmt 0 view .LVU9
  90 002a 0024     		movs	r4, #0
  91 002c 24E0     		b	.L2
  92              	.LVL7:
  93              	.L10:
  27:USER/main.c   **** 	
  28:USER/main.c   ****     while(1)
  29:USER/main.c   ****     {
  30:USER/main.c   **** 			
  31:USER/main.c   ****        if(USART_RX_STA&0x8000)
  32:USER/main.c   **** 		{					   
  33:USER/main.c   **** 			len=USART_RX_STA&0x3fff;//得到此次接收到的数据长度
  94              		.loc 1 33 4 is_stmt 1 view .LVU10
  34:USER/main.c   **** 			printf("\r\n您发送的消息为:\r\n");
  95              		.loc 1 34 4 view .LVU11
  96 002e 2A48     		ldr	r0, .L13
  97 0030 FFF7FEFF 		bl	puts
  98              	.LVL8:
  35:USER/main.c   **** 			HAL_UART_Transmit(&UART1_Handler,(uint8_t*)USART_RX_BUF,len,1000);	//发送接收到的数据
  99              		.loc 1 35 4 view .LVU12
 100 0034 4FF47A73 		mov	r3, #1000
 101 0038 EAB2     		uxtb	r2, r5
 102 003a 2849     		ldr	r1, .L13+4
 103 003c 2848     		ldr	r0, .L13+8
 104 003e FFF7FEFF 		bl	HAL_UART_Transmit
 105              	.LVL9:
  36:USER/main.c   **** 			while(__HAL_UART_GET_FLAG(&UART1_Handler,UART_FLAG_TC)!=SET);		//等待发送结束
 106              		.loc 1 36 4 view .LVU13
ARM GAS  /tmp/cczpJbAA.s 			page 4


 107              	.L4:
 108              		.loc 1 36 64 discriminator 1 view .LVU14
 109              		.loc 1 36 9 discriminator 1 view .LVU15
 110              		.loc 1 36 10 is_stmt 0 discriminator 1 view .LVU16
 111 0042 274B     		ldr	r3, .L13+8
 112 0044 1B68     		ldr	r3, [r3]
 113 0046 1B68     		ldr	r3, [r3]
 114              		.loc 1 36 9 discriminator 1 view .LVU17
 115 0048 13F0400F 		tst	r3, #64
 116 004c F9D0     		beq	.L4
  37:USER/main.c   **** 			printf("\r\n\r\n");//插入换行
 117              		.loc 1 37 4 is_stmt 1 view .LVU18
 118 004e 2548     		ldr	r0, .L13+12
 119 0050 FFF7FEFF 		bl	puts
 120              	.LVL10:
  38:USER/main.c   **** 			USART_RX_STA=0;
 121              		.loc 1 38 4 view .LVU19
 122              		.loc 1 38 16 is_stmt 0 view .LVU20
 123 0054 244B     		ldr	r3, .L13+16
 124 0056 0022     		movs	r2, #0
 125 0058 1A80     		strh	r2, [r3]	@ movhi
 126 005a 0DE0     		b	.L2
 127              	.LVL11:
 128              	.L11:
  39:USER/main.c   **** 		}else
  40:USER/main.c   **** 		{
  41:USER/main.c   **** 			times++;
  42:USER/main.c   **** 			if(times%5000==0)
  43:USER/main.c   **** 			{
  44:USER/main.c   **** 				printf("\r\nALIENTEK 探索者STM32F407开发板 串口实验\r\n");
 129              		.loc 1 44 5 is_stmt 1 view .LVU21
 130 005c 2348     		ldr	r0, .L13+20
 131 005e FFF7FEFF 		bl	puts
 132              	.LVL12:
  45:USER/main.c   **** 				printf("正点原子@ALIENTEK\r\n\r\n\r\n");
 133              		.loc 1 45 5 view .LVU22
 134 0062 2348     		ldr	r0, .L13+24
 135 0064 FFF7FEFF 		bl	puts
 136              	.LVL13:
 137 0068 19E0     		b	.L6
 138              	.L12:
  46:USER/main.c   **** 			}
  47:USER/main.c   **** 			if(times%200==0)printf("请输入数据,以回车键结束\r\n");  
 139              		.loc 1 47 20 discriminator 1 view .LVU23
 140 006a 2248     		ldr	r0, .L13+28
 141 006c FFF7FEFF 		bl	puts
 142              	.LVL14:
 143 0070 1FE0     		b	.L7
 144              	.L8:
  48:USER/main.c   **** 			if(times%30==0)LED0=!LED0;//闪烁LED,提示系统正在运行.
  49:USER/main.c   **** 			delay_ms(10);   
 145              		.loc 1 49 4 view .LVU24
 146 0072 0A20     		movs	r0, #10
 147 0074 FFF7FEFF 		bl	delay_ms
 148              	.LVL15:
 149              	.L2:
  28:USER/main.c   ****     {
ARM GAS  /tmp/cczpJbAA.s 			page 5


 150              		.loc 1 28 5 view .LVU25
  31:USER/main.c   **** 		{					   
 151              		.loc 1 31 8 view .LVU26
  31:USER/main.c   **** 		{					   
 152              		.loc 1 31 11 is_stmt 0 view .LVU27
 153 0078 1B4B     		ldr	r3, .L13+16
 154 007a 1D88     		ldrh	r5, [r3]
 155 007c B3F90030 		ldrsh	r3, [r3]
  31:USER/main.c   **** 		{					   
 156              		.loc 1 31 10 view .LVU28
 157 0080 002B     		cmp	r3, #0
 158 0082 D4DB     		blt	.L10
  41:USER/main.c   **** 			if(times%5000==0)
 159              		.loc 1 41 4 is_stmt 1 view .LVU29
  41:USER/main.c   **** 			if(times%5000==0)
 160              		.loc 1 41 9 is_stmt 0 view .LVU30
 161 0084 0134     		adds	r4, r4, #1
 162              	.LVL16:
  41:USER/main.c   **** 			if(times%5000==0)
 163              		.loc 1 41 9 view .LVU31
 164 0086 A4B2     		uxth	r4, r4
 165              	.LVL17:
  42:USER/main.c   **** 			{
 166              		.loc 1 42 4 is_stmt 1 view .LVU32
  42:USER/main.c   **** 			{
 167              		.loc 1 42 17 is_stmt 0 view .LVU33
 168 0088 1B4B     		ldr	r3, .L13+32
 169 008a A3FB0423 		umull	r2, r3, r3, r4
 170 008e 1B0B     		lsrs	r3, r3, #12
 171 0090 41F28832 		movw	r2, #5000
 172 0094 02FB1343 		mls	r3, r2, r3, r4
 173 0098 9BB2     		uxth	r3, r3
  42:USER/main.c   **** 			{
 174              		.loc 1 42 6 view .LVU34
 175 009a 002B     		cmp	r3, #0
 176 009c DED0     		beq	.L11
 177              	.L6:
  47:USER/main.c   **** 			if(times%30==0)LED0=!LED0;//闪烁LED,提示系统正在运行.
 178              		.loc 1 47 4 is_stmt 1 view .LVU35
  47:USER/main.c   **** 			if(times%30==0)LED0=!LED0;//闪烁LED,提示系统正在运行.
 179              		.loc 1 47 16 is_stmt 0 view .LVU36
 180 009e 174B     		ldr	r3, .L13+36
 181 00a0 A3FB0423 		umull	r2, r3, r3, r4
 182 00a4 9B09     		lsrs	r3, r3, #6
 183 00a6 C822     		movs	r2, #200
 184 00a8 02FB1343 		mls	r3, r2, r3, r4
 185 00ac 9BB2     		uxth	r3, r3
  47:USER/main.c   **** 			if(times%30==0)LED0=!LED0;//闪烁LED,提示系统正在运行.
 186              		.loc 1 47 6 view .LVU37
 187 00ae 002B     		cmp	r3, #0
 188 00b0 DBD0     		beq	.L12
 189              	.L7:
  48:USER/main.c   **** 			delay_ms(10);   
 190              		.loc 1 48 4 is_stmt 1 view .LVU38
  48:USER/main.c   **** 			delay_ms(10);   
 191              		.loc 1 48 15 is_stmt 0 view .LVU39
 192 00b2 134B     		ldr	r3, .L13+40
ARM GAS  /tmp/cczpJbAA.s 			page 6


 193 00b4 A3FB0423 		umull	r2, r3, r3, r4
 194 00b8 23F00F02 		bic	r2, r3, #15
 195 00bc A2EB1312 		sub	r2, r2, r3, lsr #4
 196 00c0 5300     		lsls	r3, r2, #1
 197 00c2 E31A     		subs	r3, r4, r3
 198 00c4 9BB2     		uxth	r3, r3
  48:USER/main.c   **** 			delay_ms(10);   
 199              		.loc 1 48 6 view .LVU40
 200 00c6 002B     		cmp	r3, #0
 201 00c8 D3D1     		bne	.L8
  48:USER/main.c   **** 			delay_ms(10);   
 202              		.loc 1 48 19 is_stmt 1 discriminator 1 view .LVU41
  48:USER/main.c   **** 			delay_ms(10);   
 203              		.loc 1 48 25 is_stmt 0 discriminator 1 view .LVU42
 204 00ca 0E4A     		ldr	r2, .L13+44
 205 00cc 1368     		ldr	r3, [r2]
  48:USER/main.c   **** 			delay_ms(10);   
 206              		.loc 1 48 24 discriminator 1 view .LVU43
 207 00ce B3FA83F3 		clz	r3, r3
 208 00d2 5B09     		lsrs	r3, r3, #5
  48:USER/main.c   **** 			delay_ms(10);   
 209              		.loc 1 48 23 discriminator 1 view .LVU44
 210 00d4 1360     		str	r3, [r2]
 211 00d6 CCE7     		b	.L8
 212              	.L14:
 213              		.align	2
 214              	.L13:
 215 00d8 00000000 		.word	.LC0
 216 00dc 00000000 		.word	USART_RX_BUF
 217 00e0 00000000 		.word	UART1_Handler
 218 00e4 1C000000 		.word	.LC1
 219 00e8 00000000 		.word	USART_RX_STA
 220 00ec 20000000 		.word	.LC2
 221 00f0 58000000 		.word	.LC3
 222 00f4 74000000 		.word	.LC4
 223 00f8 5917B7D1 		.word	-776530087
 224 00fc 1F85EB51 		.word	1374389535
 225 0100 89888888 		.word	-2004318071
 226 0104 A4824242 		.word	1111655076
 227              		.cfi_endproc
 228              	.LFE135:
 230              		.text
 231              	.Letext0:
 232              		.file 2 "/opt/gcc_arm/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/machine/_default_typ
 233              		.file 3 "/opt/gcc_arm/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/sys/_stdint.h"
 234              		.file 4 "CORE/core_cm4.h"
 235              		.file 5 "USER/system_stm32f4xx.h"
 236              		.file 6 "USER/stm32f407xx.h"
 237              		.file 7 "USER/stm32f4xx.h"
 238              		.file 8 "HALLIB/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 239              		.file 9 "HALLIB/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 240              		.file 10 "HALLIB/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_uart.h"
 241              		.file 11 "SYSTEM/sys/sys.h"
 242              		.file 12 "/opt/gcc_arm/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/sys/lock.h"
 243              		.file 13 "/opt/gcc_arm/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/sys/_types.h"
 244              		.file 14 "/opt/gcc_arm/gcc-arm-none-eabi-9-2019-q4-major/lib/gcc/arm-none-eabi/9.2.1/include/stdde
 245              		.file 15 "/opt/gcc_arm/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/sys/reent.h"
ARM GAS  /tmp/cczpJbAA.s 			page 7


 246              		.file 16 "SYSTEM/usart/usart.h"
 247              		.file 17 "HALLIB/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
 248              		.file 18 "SYSTEM/delay/delay.h"
 249              		.file 19 "HARDWARE/LED/led.h"
 250              		.file 20 "HARDWARE/KEY/key.h"
 251              		.file 21 "<built-in>"
ARM GAS  /tmp/cczpJbAA.s 			page 8


DEFINED SYMBOLS
                            *ABS*:0000000000000000 main.c
     /tmp/cczpJbAA.s:18     .rodata.main.str1.4:0000000000000000 $d
     /tmp/cczpJbAA.s:40     .text.main:0000000000000000 $t
     /tmp/cczpJbAA.s:48     .text.main:0000000000000000 main
     /tmp/cczpJbAA.s:215    .text.main:00000000000000d8 $d

UNDEFINED SYMBOLS
HAL_Init
Stm32_Clock_Init
delay_init
uart_init
LED_Init
KEY_Init
puts
HAL_UART_Transmit
delay_ms
USART_RX_BUF
UART1_Handler
USART_RX_STA
